<link rel="import" href="../../DatePicker/date-picker.html" />
<link rel="import" href="../../TimePicker/time-picker.html" />
<link rel="import" href="../../MaskedInput/masked-input.html" />

<dom-module id="vi-persistent-object-attribute-date-time">
    <template>
        <template is="dom-if" if="{{!editing}}">
            <span>{{attribute.displayValue}}</span>
        </template>
        <template is="dom-if" if="{{editing}}" restamp>
            <vi-persistent-object-attribute-edit attribute="{{attribute}}">
                <div content>
                    <template is="dom-if" if="{{hasDateComponent}}">
                        <input is="vi-masked-input" id="date" size="8" format$="{{dateFormat}}" separator$="{{dateSeparator}}" on-filled="_dateFilled" readonly$="{{readOnly}}" />
                        <vi-attached-notifier on-attached="_dateComponentAttached"></vi-attached-notifier>
                    </template>
                    <template is="dom-if" if="{{hasTimeComponent}}">
                        <input is="vi-masked-input" id="time" size="4" format$="{{timeFormat}}" separator$="{{timeSeparator}}" on-filled="_timeFilled" readonly$="{{readOnly}}" />
                        <vi-attached-notifier on-attached="_timeComponentAttached"></vi-attached-notifier>
                    </template>
                </div>
                <template is="dom-if" if="{{!readOnly}}">
                    <template is="dom-if" if="{{hasTimeComponent}}">
                        <vi-popup content-align="right">
                            <button header tabindex="-1">
                                <vi-icon source="Clock"></vi-icon>
                            </button>
                            <div class="clock" content>
                                <vi-time-picker time="{{selectedDate}}"></vi-time-picker>
                            </div>
                        </vi-popup>
                    </template>
                    <template is="dom-if" if="{{hasDateComponent}}">
                        <vi-popup content-align="right">
                            <button header tabindex="-1">
                                <vi-icon source="Calendar"></vi-icon>
                            </button>
                            <div class="calendar" content>
                                <vi-date-picker selected-date="{{selectedDate}}"></vi-date-picker>
                            </div>
                        </vi-popup>
                    </template>
                    <template is="dom-if" if="{{canClear}}">
                        <button on-tap="_clear" tabindex="-1">
                            <vi-icon source="Remove"></vi-icon>
                        </button>
                    </template>
                </template>
            </vi-persistent-object-attribute-edit>
        </template>
    </template>
</dom-module>

<link rel="stylesheet" href="persistent-object-attribute-date-time.css" />
<script src="persistent-object-attribute-date-time.js"></script>