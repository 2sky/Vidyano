<link rel="import" href="../../Libs/iron-a11y-keys/iron-a11y-keys.html" />
<link rel="import" href="../WebComponent/webcomponent.html" />
<link rel="import" href="../AttachedNotifier/attached-notifier.html" />
<link rel="import" href="../SizeTracker/size-tracker.html" />
<link rel="import" href="../Spinner/spinner.html" />
<link rel="import" href="../Resource/resource.html" />
<link rel="import" href="../Button/button.html" />
<link rel="import" href="../TemplatePresenter/template-presenter.html" />
<link rel="import" href="../SessionPresenter/session-presenter.html" />
<link rel="import" href="../Menu/menu.html" />
<link rel="import" href="../Spinner/spinner.html" />
<link rel="import" href="../Overflow/overflow.html" />
<link rel="import" href="../Dialog/dialog.html" />
<link rel="import" href="../MessageDialog/message-dialog.html" />
<link rel="import" href="../Popup/popup.html" />
<link rel="import" href="../PopupMenu/popup-menu.html" />
<link rel="import" href="../ProgramUnitPresenter/program-unit-presenter.html" />
<link rel="import" href="../PersistentObjectPresenter/persistent-object-presenter.html" />
<link rel="import" href="../PersistentObjectAttributePresenter/persistent-object-attribute-presenter.html" />
<link rel="import" href="../PersistentObjectDialog/persistent-object-dialog.html" />
<link rel="import" href="../QueryPresenter/query-presenter.html" />
<link rel="import" href="../QueryItemsPresenter/query-items-presenter.html" />
<link rel="import" href="../SignIn/sign-in.html" />

<dom-module id="vi-app">
    <template>
        <iron-a11y-keys keys="{{keys}}" on-keys-pressed="_keysPressed"></iron-a11y-keys>
        <template is="dom-if" if="{{initializing}}" restamp>
            <vi-spinner></vi-spinner>
        </template>
        <template is="dom-if" if="{{!initializing}}">
            <div class="fit layout horizontal">
                <template is="dom-if" if="{{showMenu}}" restamp>
                    <vi-menu menu label="{{label}}" items="{{service.application.programUnits}}" program-unit="{{programUnit}}">
                        <content select="[menu-element]"></content>
                    </vi-menu>
                </template>
                <content select="vi-app-route"></content>
                <vi-app-route route="Query.:id" component="Vidyano.WebComponents.QueryPresenter"></vi-app-route>
                <vi-app-route route=":programUnitName/Query.:id" component="Vidyano.WebComponents.QueryPresenter"></vi-app-route>
                <vi-app-route route="PersistentObject.:id(/:objectId)" component="Vidyano.WebComponents.PersistentObjectPresenter"></vi-app-route>
                <vi-app-route route=":programUnitName/PersistentObject.:id(/:objectId)" component="Vidyano.WebComponents.PersistentObjectPresenter"></vi-app-route>
                <vi-app-route route=":programUnitName/FromAction/:fromActionId" component="Vidyano.WebComponents.PersistentObjectPresenter"></vi-app-route>
                <vi-app-route route=":programUnitName(/)" component="Vidyano.WebComponents.ProgramUnitPresenter"></vi-app-route>
                <content select="[dialog]"></content>
            </div>
        </template>
        <vi-app-route class="fit" route="SignIn(/:returnUrl)">
            <vi-sign-in label="{{label}}" image="{{signInImage}}"></vi-sign-in>
        </vi-app-route>
        <vi-app-config>
            <vi-persistent-object-attribute-config type="CommonMark" height="6" wrap-around></vi-persistent-object-attribute-config>
            <vi-persistent-object-attribute-config type="MultiLineString" height="4" wrap-around></vi-persistent-object-attribute-config>
            <vi-persistent-object-attribute-config type="MultiString" height="4" wrap-around></vi-persistent-object-attribute-config>
            <vi-persistent-object-attribute-config type="Image" height="4" wrap-around></vi-persistent-object-attribute-config>
            <vi-persistent-object-attribute-config type="TranslatedString" height="attr.getTypeHint('MultiLine') == 'True' ? 3 : 2" wrap-around></vi-persistent-object-attribute-config>
            <vi-persistent-object-attribute-config type="AsDetail" height="6" width="4"></vi-persistent-object-attribute-config>
            <content select="vi-persistent-object-attribute-config, vi-persistent-object-tab-config"></content>
        </vi-app-config>
    </template>
</dom-module>

<link rel="stylesheet" href="app.css" />
<script src="app.js"></script>
<script src="Config/persistent-object-attribute-config.js"></script>
<script src="Config/persistent-object-tab-config.js"></script>
<script src="Config/app-config.js"></script>