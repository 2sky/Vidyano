<link rel="import" href="../../DatePicker/date-picker.html" />
<link rel="import" href="../../TimePicker/time-picker.html" />
<link rel="import" href="../../MaskedInput/masked-input.html" />

<dom-module id="vi-persistent-object-attribute-date-time">
    <template>
        <link rel="stylesheet" href="persistent-object-attribute-date-time.css" />
        <template is="dom-if" if="[[!editing]]">
            <span>[[attribute.displayValue]]</span>
        </template>
        <template is="dom-if" if="[[editing]]">
            <vi-persistent-object-attribute-edit attribute="[[attribute]]">
                <div content class="layout horizontal">
                    <input is="vi-masked-input" id="date" size="9" format$="[[dateFormat]]" separator$="[[dateSeparator]]" on-filled="_dateFilled" readonly$="[[readOnly]]" hidden$="[[!hasDateComponent]]" flex$="[[!hasTimeComponent]]" />
                    <input is="vi-masked-input" id="time" size="5" format$="[[timeFormat]]" separator$="[[timeSeparator]]" on-filled="_timeFilled" readonly$="[[readOnly]]" hidden$="[[!hasTimeComponent]]" />
                </div>
                <template is="dom-if" if="[[!readOnly]]">
                    <template is="dom-if" if="[[hasTimeComponent]]">
                        <vi-popup content-align="right">
                            <button header tabindex="-1">
                                <vi-icon source="Clock"></vi-icon>
                            </button>
                            <div class="clock" content>
                                <vi-time-picker time="{{selectedDate}}"></vi-time-picker>
                            </div>
                        </vi-popup>
                    </template>
                    <template is="dom-if" if="[[hasDateComponent]]">
                        <vi-popup content-align="right">
                            <button header tabindex="-1">
                                <vi-icon source="Calendar"></vi-icon>
                            </button>
                            <div class="calendar" content>
                                <vi-date-picker selected-date="{{selectedDate}}"></vi-date-picker>
                            </div>
                        </vi-popup>
                    </template>
                    <template is="dom-if" if="[[canClear]]">
                        <button on-tap="_clear" tabindex="-1">
                            <vi-icon source="Remove"></vi-icon>
                        </button>
                    </template>
                </template>
            </vi-persistent-object-attribute-edit>
        </template>
    </template>
</dom-module>

<script src="persistent-object-attribute-date-time.js"></script>