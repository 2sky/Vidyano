<link rel="import" href="../Button/button.html" />

<dom-module id="vi-action-button">
    <template>
        <link rel="stylesheet" href="action-button.css" />
        <template is="dom-if" if="[[!options]]">
            <vi-button disabled="[[!canExecute]]" header on-tap="_onExecuteWithoutOptions" inverse>
                <div class="layout horizontal">
                    <vi-icon source="[[icon]]"></vi-icon>
                    <span class="label">[[action.definition.displayName]]</span>
                </div>
            </vi-button>
        </template>
        <template is="dom-if" if="[[options]]">
            <vi-popup-menu open-on-hover="[[_computeOpenOnHover(overflow, openOnHover)]]" disabled="[[!canExecute]]">
                <vi-button disabled="[[!canExecute]]" slot="header" inverse class="options">
                    <div class="layout horizontal">
                        <vi-icon source="[[icon]]"></vi-icon>
                        <span class="label">[[action.definition.displayName]]</span>
                        <vi-icon source="Down"></vi-icon>
                    </div>
                </vi-button>
                <template is="dom-repeat" items="[[options]]" as="option">
                    <vi-popup-menu-item label="[[option.value]]" on-tap="_onExecuteWithOption"></vi-popup-menu-item>
                </template>
            </vi-popup-menu>
        </template>
    </template>
</dom-module>

<script src="action-button.js"></script>