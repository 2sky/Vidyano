<link rel="import" href="../ActionBar/action-bar.html" />
<link rel="import" href="../Notification/notification.html" />
<link rel="import" href="../PersistentObjectTabBar/persistent-object-tab-bar.html" />
<link rel="import" href="../PersistentObjectTabPresenter/persistent-object-tab-presenter.html" />
<link rel="import" href="../PersistentObjectTab/persistent-object-tab.html" />

<dom-module id="vi-persistent-object">
    <template>
        <link rel="stylesheet" href="persistent-object.css" />
        <header>
            <div class="layout horizontal title">
                <h1 sensitive$="[[persistentObject.isBreadcrumbSensitive]]" class="flex">[[persistentObject.breadcrumb]]</h1>
                <vi-action-bar service-object="[[persistentObject]]"></vi-action-bar>
            </div>
            <div class="layout horizontal tabs">
                <div class="master">
                    <vi-persistent-object-tab-bar tabs="[[masterTabs]]" selected-tab="{{selectedMasterTab}}"></vi-persistent-object-tab-bar>
                </div>
                <vi-persistent-object-details-header class="flex detail" tabs="[[detailTabs]]" tab="{{selectedDetailTab}}"></vi-persistent-object-details-header>
            </div>
        </header>
        <div class="horizontal layout flex content">
            <div class="layout vertical master">
                <vi-notification service-object="[[selectedMasterTab.target]]"></vi-notification>
                <vi-persistent-object-tab-presenter class="flex" tab="[[selectedMasterTab]]"></vi-persistent-object-tab-presenter>
            </div>
            <div id="splitter" on-track="_trackSplitter"></div>
            <vi-persistent-object-details-content class="vertical layout flex detail" tab="{{selectedDetailTab}}" hide-action-bar="[[_hideActionBar(selectedDetailTab)]]"></vi-persistent-object-details-content>
        </div>
    </template>
</dom-module>

<dom-module id="vi-persistent-object-details-content">
    <template>
        <style>
            :host {
                --vi-persistent-object-tab--padding: var(--theme-h3) var(--theme-h2);
                --theme-color: var(--theme-accent-color);
                --theme-color-light: var(--theme-accent-color-light);
                --theme-color-lighter: var(--theme-accent-color-lighter);
                --theme-color-dark: var(--theme-accent-color-dark);
                --theme-color-darker: var(--theme-accent-color-darker);
                --theme-color-faint: var(--theme-accent-color-faint);
                --theme-color-semi-faint: var(--theme-accent-color-semi-faint);
            }
        </style>
        <vi-action-bar service-object="[[tab.target]]" hidden$="[[hideActionBar]]"></vi-action-bar>
        <vi-notification service-object="[[tab.target]]"></vi-notification>
        <vi-persistent-object-tab-presenter class="flex" tab="[[tab]]"></vi-persistent-object-tab-presenter>
    </template>
</dom-module>

<dom-module id="vi-persistent-object-details-header">
    <template>
        <style>
            :host {
                --theme-color: var(--theme-accent-color);
                --theme-color-light: var(--theme-accent-color-light);
                --theme-color-lighter: var(--theme-accent-color-lighter);
                --theme-color-dark: var(--theme-accent-color-dark);
                --theme-color-darker: var(--theme-accent-color-darker);
                --theme-color-faint: var(--theme-accent-color-faint);
                --theme-color-semi-faint: var(--theme-accent-color-semi-faint);
            }
        </style>
        <vi-persistent-object-tab-bar tabs="[[tabs]]" selected-tab="{{tab}}"></vi-persistent-object-tab-bar>
    </template>
</dom-module>

<script src="persistent-object.js"></script>